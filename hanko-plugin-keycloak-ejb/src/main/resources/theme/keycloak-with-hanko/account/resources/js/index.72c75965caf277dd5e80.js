!function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="${url.resourcesPath}/js/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([276,1]),n()}({272:function(e,t){},276:function(e,t,n){n(277),n(463),e.exports=n(520)},464:function(e,t,n){window.resourceBaseUrl&&(n.p=window.resourceBaseUrl)},469:function(e,t,n){var r={"./af":133,"./af.js":133,"./ar":134,"./ar-dz":135,"./ar-dz.js":135,"./ar-kw":136,"./ar-kw.js":136,"./ar-ly":137,"./ar-ly.js":137,"./ar-ma":138,"./ar-ma.js":138,"./ar-sa":139,"./ar-sa.js":139,"./ar-tn":140,"./ar-tn.js":140,"./ar.js":134,"./az":141,"./az.js":141,"./be":142,"./be.js":142,"./bg":143,"./bg.js":143,"./bm":144,"./bm.js":144,"./bn":145,"./bn-bd":146,"./bn-bd.js":146,"./bn.js":145,"./bo":147,"./bo.js":147,"./br":148,"./br.js":148,"./bs":149,"./bs.js":149,"./ca":150,"./ca.js":150,"./cs":151,"./cs.js":151,"./cv":152,"./cv.js":152,"./cy":153,"./cy.js":153,"./da":154,"./da.js":154,"./de":155,"./de-at":156,"./de-at.js":156,"./de-ch":157,"./de-ch.js":157,"./de.js":155,"./dv":158,"./dv.js":158,"./el":159,"./el.js":159,"./en-au":160,"./en-au.js":160,"./en-ca":161,"./en-ca.js":161,"./en-gb":162,"./en-gb.js":162,"./en-ie":163,"./en-ie.js":163,"./en-il":164,"./en-il.js":164,"./en-in":165,"./en-in.js":165,"./en-nz":166,"./en-nz.js":166,"./en-sg":167,"./en-sg.js":167,"./eo":168,"./eo.js":168,"./es":169,"./es-do":170,"./es-do.js":170,"./es-mx":171,"./es-mx.js":171,"./es-us":172,"./es-us.js":172,"./es.js":169,"./et":173,"./et.js":173,"./eu":174,"./eu.js":174,"./fa":175,"./fa.js":175,"./fi":176,"./fi.js":176,"./fil":177,"./fil.js":177,"./fo":178,"./fo.js":178,"./fr":179,"./fr-ca":180,"./fr-ca.js":180,"./fr-ch":181,"./fr-ch.js":181,"./fr.js":179,"./fy":182,"./fy.js":182,"./ga":183,"./ga.js":183,"./gd":184,"./gd.js":184,"./gl":185,"./gl.js":185,"./gom-deva":186,"./gom-deva.js":186,"./gom-latn":187,"./gom-latn.js":187,"./gu":188,"./gu.js":188,"./he":189,"./he.js":189,"./hi":190,"./hi.js":190,"./hr":191,"./hr.js":191,"./hu":192,"./hu.js":192,"./hy-am":193,"./hy-am.js":193,"./id":194,"./id.js":194,"./is":195,"./is.js":195,"./it":196,"./it-ch":197,"./it-ch.js":197,"./it.js":196,"./ja":198,"./ja.js":198,"./jv":199,"./jv.js":199,"./ka":200,"./ka.js":200,"./kk":201,"./kk.js":201,"./km":202,"./km.js":202,"./kn":203,"./kn.js":203,"./ko":204,"./ko.js":204,"./ku":205,"./ku.js":205,"./ky":206,"./ky.js":206,"./lb":207,"./lb.js":207,"./lo":208,"./lo.js":208,"./lt":209,"./lt.js":209,"./lv":210,"./lv.js":210,"./me":211,"./me.js":211,"./mi":212,"./mi.js":212,"./mk":213,"./mk.js":213,"./ml":214,"./ml.js":214,"./mn":215,"./mn.js":215,"./mr":216,"./mr.js":216,"./ms":217,"./ms-my":218,"./ms-my.js":218,"./ms.js":217,"./mt":219,"./mt.js":219,"./my":220,"./my.js":220,"./nb":221,"./nb.js":221,"./ne":222,"./ne.js":222,"./nl":223,"./nl-be":224,"./nl-be.js":224,"./nl.js":223,"./nn":225,"./nn.js":225,"./oc-lnc":226,"./oc-lnc.js":226,"./pa-in":227,"./pa-in.js":227,"./pl":228,"./pl.js":228,"./pt":229,"./pt-br":230,"./pt-br.js":230,"./pt.js":229,"./ro":231,"./ro.js":231,"./ru":232,"./ru.js":232,"./sd":233,"./sd.js":233,"./se":234,"./se.js":234,"./si":235,"./si.js":235,"./sk":236,"./sk.js":236,"./sl":237,"./sl.js":237,"./sq":238,"./sq.js":238,"./sr":239,"./sr-cyrl":240,"./sr-cyrl.js":240,"./sr.js":239,"./ss":241,"./ss.js":241,"./sv":242,"./sv.js":242,"./sw":243,"./sw.js":243,"./ta":244,"./ta.js":244,"./te":245,"./te.js":245,"./tet":246,"./tet.js":246,"./tg":247,"./tg.js":247,"./th":248,"./th.js":248,"./tk":249,"./tk.js":249,"./tl-ph":250,"./tl-ph.js":250,"./tlh":251,"./tlh.js":251,"./tr":252,"./tr.js":252,"./tzl":253,"./tzl.js":253,"./tzm":254,"./tzm-latn":255,"./tzm-latn.js":255,"./tzm.js":254,"./ug-cn":256,"./ug-cn.js":256,"./uk":257,"./uk.js":257,"./ur":258,"./ur.js":258,"./uz":259,"./uz-latn":260,"./uz-latn.js":260,"./uz.js":259,"./vi":261,"./vi.js":261,"./x-pseudo":262,"./x-pseudo.js":262,"./yo":263,"./yo.js":263,"./zh-cn":264,"./zh-cn.js":264,"./zh-hk":265,"./zh-hk.js":265,"./zh-mo":266,"./zh-mo.js":266,"./zh-tw":267,"./zh-tw.js":267};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=469},477:function(e,t){},483:function(e,t){},516:function(e,t){},517:function(e){e.exports=JSON.parse('{"en":{"AddHankoAuthenticator.registerNewAuthenticatorHeader":"Register new Hanko Authenticator","AddHankoAuthenticator.cancelButton":"Cancel","ChangePassword.changePasswordHeader":"Change Password","ChangePassword.passwordLabel":"Password","ChangePassword.repeatPasswordLabel":"Password (repeat)","ChangePassword.changeButton":"Change","DeviceComponent.saveButton":"save","DeviceComponent.editButton":"edit","DeviceComponent.deleteButton":"delete","DeviceComponent.warningHeader":"Warning","DeviceComponent.warningMessage":"You are about to delete your last device. You will not be able to login unless you register another device.","DeviceComponent.cancelButton":"cancel","DeviceComponent.confirmButton":"confirm","RegisteredDevices.noDeviceWarningHeader":"Please register a 2nd factor now!","RegisteredDevices.noDeviceWarningMessage":"You don\'t have any 2nd factor device configured. If you logout now, you cannot login anymore.","RegisteredDevices.noDeviceMessage":"No devices registered.","RegisteredDevices.deviceNameLabel":"Name","RegisteredDevices.deviceNameType":"Type","RegisteredDevices.deviceNameCreatedAt":"Created At","RegisteredDevices.deviceNameLastActivity":"Last Activity","RegisteredDevices.deviceNameManage":"Manage","App.manageAccountHeader":"Manage Account","App.myAccountHeader":"My Account","App.nameLabel":"Name","App.emailLabel":"E-Mail","App.registeredDevicesHeader":"Registered Devices","App.leadingMessage":"Loading...","App.addHankoAuthenticatorButton":"Add Hanko Authenticator","App.addSecurityKeyButton":"Add Security Key","App.addPlatformAuthenticatorButton":"Add Platform Authenticator","NotLoggedIn.loginFailedHeader":"Login failed","NotLoggedIn.tryAgainButton":"Try again"},"de":{"AddHankoAuthenticator.cancelButton":"Abbrechen","AddHankoAuthenticator.registerNewAuthenticatorHeader":"Neuen Hanko Authenticator registrieren","App.addHankoAuthenticatorButton":"Hanko Authenticator hinzufügen","App.addSecurityKeyButton":"Neuen Sicherheitsschlüssel hinzufügen","App.addPlatformAuthenticatorButton":"Neuen Platform Authenticator hinzufügen","App.emailLabel":"E-Mail","App.leadingMessage":"Lade Daten ...","App.manageAccountHeader":"Account Verwalten","App.myAccountHeader":"Mein Account","App.nameLabel":"Name","App.registeredDevicesHeader":"Registrierte Anmeldegeräte","ChangePassword.changeButton":"Ändern","ChangePassword.changePasswordHeader":"Passwort ändern","ChangePassword.passwordLabel":"Passwort","ChangePassword.repeatPasswordLabel":"Passwort (wiederholen)","DeviceComponent.cancelButton":"abbrechen","DeviceComponent.confirmButton":"löschen","DeviceComponent.deleteButton":"löschen","DeviceComponent.editButton":"anpassen","DeviceComponent.saveButton":"speichern","DeviceComponent.warningHeader":"Achtung","DeviceComponent.warningMessage":"Möchten Sie wirklich ihr letztes Anmeldegerät löschen? Wenn Sie keine neues Anmeldegerät registrieren, können Sie sich zukünftig nicht mehr anmelden.","NotLoggedIn.loginFailedHeader":"Login fehlgeschlagen","NotLoggedIn.tryAgainButton":"Erneut versuchen","RegisteredDevices.deviceNameCreatedAt":"Registriert","RegisteredDevices.deviceNameLabel":"Name","RegisteredDevices.deviceNameLastActivity":"Zuletzt aktiv","RegisteredDevices.deviceNameManage":"Ändern","RegisteredDevices.deviceNameType":"Typ","RegisteredDevices.noDeviceMessage":"Es sind keine Anmeldegeräte registriert.","RegisteredDevices.noDeviceWarningHeader":"Bitte registrieren Sie ein Anmeldegerät","RegisteredDevices.noDeviceWarningMessage":"Bitte registrieren Sie jetzt ein Anmeldegerät, sonst können Sie sich nicht mehr anmelden."}}')},520:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),i=n(97),s=function(e,t,n,r){return void 0===n&&(n=void 0),void 0===r&&(r=void 0),new Promise((function(a,o){var i=window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth/",s=window.realmId?window.realmId:"master";e.updateToken(30).success((function(o){var c=i+"realms/"+s+t,l=r?{authorization:"Bearer "+e.token,"Content-Type":"application/json"}:{authorization:"Bearer "+e.token},u={method:n||"GET",headers:l,body:r?JSON.stringify(r):null};fetch(c,u).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return a(void 0)}))}))}))},c=n(1),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.render=function(){return a.createElement("div",{className:"popup-wrapper"},a.createElement("div",{className:"popup-content"},this.props.children))},t}(a.Component),d=n(3);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=o.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),m=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),h=function(e){return o.a.createElement("svg",p({width:24,height:24},e),f,m)};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=o.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),y=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),w=function(e){return o.a.createElement("svg",g({width:24,height:24},e),v,y)};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=o.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),A=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),k=function(e){return o.a.createElement("svg",j({width:24,height:24},e),E,A)};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),C=o.a.createElement("path",{d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),O=function(e){return o.a.createElement("svg",b({width:24,height:24},e),D,C)},N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keyDownHandler=function(e){var n=t.props.handleEnter;"Enter"==e.key&&n&&n()},t}return N(t,e),t.prototype.componentDidMount=function(){this.nameInput&&(this.nameInput.focus(),this.nameInput.select())},t.prototype.render=function(){var e=this;return a.createElement("input",P({className:"inline"},this.props,{ref:function(t){e.nameInput=t},onKeyDown:this.keyDownHandler}))},t}(a.Component),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(e){function t(t){var n=e.call(this,t)||this;return n.showConformationDialog=function(){n.setState({showConfirmationDialog:!0})},n.hideConfirmationDialog=function(){n.setState({showConfirmationDialog:!1})},n.confirmOrDeregister=function(){n.props.confirmDeregistration?n.showConformationDialog():n.deregister()},n.startEdit=function(){n.setState({newDeviceName:n.props.device.name}),n.props.startEditHandler()},n.cancelEdit=function(){n.props.stopEditHandler(!1)},n.finishEdit=function(){var e=n.state.newDeviceName,t=n.props,r=t.keycloak,a=t.device.deviceId;s(r,"/hanko/devices/"+a,"POST",{newName:e}).then((function(e){n.props.stopEditHandler(!0)})).catch((function(e){console.error(e),n.props.stopEditHandler(!0)}))},n.deregister=function(){var e=n.props,t=e.device,r=e.keycloak,a=e.deviceDeletedHandler;return n.hideConfirmationDialog(),s(r,"/hanko/devices/"+t.typeId+"/"+t.deviceId,"DELETE").then((function(e){a()})),!1},n.nameChanged=function(e){n.setState({newDeviceName:e.target.value})},n.handleKeyDown=function(e){"Enter"===e.key&&n.finishEdit()},n.state={showConfirmationDialog:!1,newDeviceName:t.device.name},n}return _(t,e),t.prototype.componentDidUpdate=function(){this.nameInput&&(this.nameInput.focus(),this.nameInput.select())},t.prototype.render=function(){var e=this,t=this.props,n=t.device,r=t.isEditing,o=this.state,i=o.showConfirmationDialog,s=o.newDeviceName;return a.createElement("tr",null,a.createElement("td",{style:{width:"30%"}},r?a.createElement(H,{value:s,onChange:this.nameChanged,handleEnter:this.finishEdit}):n.name),a.createElement("td",null,n.type),a.createElement("td",null,c(n.createdAt).fromNow()),a.createElement("td",null,c(n.lastUsage).fromNow()),a.createElement("td",null,r?a.createElement("div",{className:"spread"},a.createElement(d.a,{id:"DeviceComponent.saveButton",defaultMessage:"save"},(function(t){return a.createElement(O,{onClick:e.finishEdit})})),a.createElement(d.a,{id:"DeviceComponent.cancelButton",defaultMessage:"cancel"},(function(t){return a.createElement(w,{onClick:e.cancelEdit})}))):a.createElement("div",{className:"spread"},a.createElement(d.a,{id:"DeviceComponent.editButton",defaultMessage:"edit"},(function(t){return a.createElement(h,{onClick:e.startEdit},a.createElement("title",null,"TEST"))})),a.createElement(d.a,{id:"DeviceComponent.deleteButton",defaultMessage:"delete"},(function(t){return a.createElement(k,{onClick:e.confirmOrDeregister})}))),i?a.createElement(u,null,a.createElement(d.a,{id:"DeviceComponent.warningHeader",defaultMessage:"Warning"},(function(e){return a.createElement("h3",null,e)})),a.createElement(d.a,{id:"DeviceComponent.warningMessage",defaultMessage:"You are about to delete your last device. You will not be able to login unless you register another device."},(function(e){return a.createElement("p",null,e)})),a.createElement("div",{className:"button-list pull-right"},a.createElement(d.a,{id:"DeviceComponent.cancelButton",defaultMessage:"cancel"},(function(t){return a.createElement("button",{className:"small",onClick:e.hideConfirmationDialog},t)})),a.createElement(d.a,{id:"DeviceComponent.confirmButton",defaultMessage:"confirm"},(function(t){return a.createElement("button",{className:"small",onClick:e.deregister},t)})))):null))},t}(a.Component),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editDevice=function(e){t.props.editIndexChangedHandler(e,!1)},t.stopEditing=function(e){t.props.editIndexChangedHandler(void 0,e)},t}return S(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.devices,r=t.keycloak,o=t.deviceDeletedHandler,i=t.editingIndex;return 0===n.length?a.createElement(d.a,{id:"RegisteredDevices.noDeviceMessage",defaultMessage:"No devices registered."},(function(e){return a.createElement("div",null,e)})):a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement(d.a,{id:"RegisteredDevices.deviceNameLabel",defaultMessage:"Name"},(function(e){return a.createElement("th",null,e)})),a.createElement(d.a,{id:"RegisteredDevices.deviceNameType",defaultMessage:"Type"},(function(e){return a.createElement("th",null,e)})),a.createElement(d.a,{id:"RegisteredDevices.deviceNameCreatedAt",defaultMessage:"Created At"},(function(e){return a.createElement("th",null,e)})),a.createElement(d.a,{id:"RegisteredDevices.deviceNameLastActivity",defaultMessage:"Last Activity"},(function(e){return a.createElement("th",null,e)})),a.createElement(d.a,{id:"RegisteredDevices.deviceNameManage",defaultMessage:"Manage"},(function(e){return a.createElement("th",null,e)})))),a.createElement("tbody",null,n.map((function(t,n){return a.createElement(M,{device:t,key:n,keycloak:r,deviceDeletedHandler:o,confirmDeregistration:!1,isEditing:n===i,startEditHandler:function(){e.editDevice(n)},stopEditHandler:e.stopEditing,editingIndex:i})}))))},t}(a.Component),z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(e){function t(t){var n=e.call(this,t)||this;return n.requestQrCode=function(){var e=n.props.keycloak;s(e,"/hanko/register","POST").then((function(e){n.setState({qrCode:e.links.find((function(e){return"qrcode"===e.rel})).href}),n.updateState()}))},n.cancel=function(){(0,n.props.cancelHandler)()},n.updateState=function(){var e=n.props.keycloak;s(e,"/hanko/register/complete","POST").then((function(e){switch(e.status){case"PENDING":n.timerId=window.setTimeout(n.updateState,1e3);break;case"OK":n.setState({qrCode:void 0}),(0,n.props.completionHandler)();break;default:n.setState({qrCode:void 0}),n.cancel()}}))},n.state={qrCode:void 0},n}return z(t,e),t.prototype.componentDidMount=function(){this.requestQrCode()},t.prototype.componentWillUnmount=function(){clearTimeout(this.timerId)},t.prototype.render=function(){var e=this,t=this.state.qrCode;return a.createElement("div",{className:"flex column align-start"},a.createElement(d.a,{id:"AddHankoAuthenticator.registerNewAuthenticatorHeader",defaultMessage:"Register new Hanko Authenticator"},(function(e){return a.createElement("h1",null,e)})),t?a.createElement("div",{className:"margin-bottom"},a.createElement("img",{src:t+"?fg=0&bg=ffffff",className:"fadein"})):null,a.createElement("div",{className:"pull-right"},a.createElement(d.a,{id:"AddHankoAuthenticator.cancelButton",defaultMessage:"Cancel"},(function(t){return a.createElement("button",{onClick:e.cancel},t)}))))},t}(a.Component),L=function(e){return{name:e.keyName,type:"FIDO_UAF"==e.authenticatorType?"Authenticator App":e.authenticatorType,createdAt:e.createdAt,lastUsage:e.lastUsage,deviceId:e.deviceId,typeId:e.authenticatorType}},x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e){function t(t){var n=e.call(this,t)||this;return n.passwordChanged=function(e){n.setState({password:e.target.value})},n.passwordValidationChanged=function(e){n.setState({passwordValidation:e.target.value})},n.changePassword=function(){var e=n.props.keycloak,t=n.state,r=t.password,a=t.passwordValidation;if(r&&r.length>0){if(!(a&&a.length>0&&r===a))return void alert("passwords do not match");s(e,"/hanko/password","POST",{newPassword:r}).then((function(e){n.setState({password:"",passwordValidation:""}),alert("Password successfully changed")})).catch((function(e){console.error(e),alert("Oops, your password could not be updated.")}))}else alert("password must not be empty")},n.state={password:"",passwordValidation:""},n}return x(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.password,r=t.passwordValidation;return a.createElement("div",{className:"container"},a.createElement(d.a,{id:"ChangePassword.changePasswordHeader",defaultMessage:"Change Password"},(function(e){return a.createElement("h1",null,e)})),a.createElement("div",{className:"formfield"},a.createElement(d.a,{id:"ChangePassword.passwordLabel",defaultMessage:"Password"},(function(e){return a.createElement("label",null,e)})),a.createElement("input",{type:"password",value:n,onChange:this.passwordChanged})),a.createElement("div",{className:"formfield"},a.createElement(d.a,{id:"ChangePassword.repeatPasswordLabel",defaultMessage:"Password (repeat)"},(function(e){return a.createElement("label",null,e)})),a.createElement("input",{type:"password",value:r,onChange:this.passwordValidationChanged})),a.createElement("div",{className:"pull-right"},a.createElement(d.a,{id:"ChangePassword.changeButton",defaultMessage:"Change"},(function(t){return a.createElement("button",{onClick:e.changePassword},t)}))))},t}(a.Component),T=n(274),U=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t).replace(/\//g,"_").replace(/\+/g,"-")},q=function(e){return function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}(e.replace(/-/g,"+").replace(/_/g,"/"))},V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(){return(K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},J=function(e){function t(t){var n=e.call(this,t)||this;return n.addThisDevice=function(){var e=n.props,t=e.keycloak,r=e.refetch,a=e.type;s(t,"/hanko/registerType/WEBAUTHN","POST",K({},"roaming"==a?{requireResidentKey:!1,userVerification:"required",authenticatorAttachment:"cross-platform"}:{requireResidentKey:!1,userVerification:"required",authenticatorAttachment:"platform"})).then((function(e){var n,a,o=JSON.parse(e.request),i=((a=n=o).user.id=q(n.user.id),a.challenge=q(n.challenge),a.excludeCredentials=n.excludeCredentials.map((function(e){return{id:q(e.id),type:e.type,transports:e.transports}})),a);navigator.credentials.create({publicKey:i}).then((function(e){var n,a,o=((a={response:{}}).id=(n=e).id,a.rawId=U(n.rawId),a.type=n.type,a.response.attestationObject=U(n.response.attestationObject),a.response.clientDataJSON=U(n.response.clientDataJSON),a);s(t,"/hanko/request/verify/webauthn","POST",o).then((function(e){r()}))})).catch((function(e){console.error(e)}))}))},n.state={},n}return V(t,e),t.prototype.render=function(){var e=this.props.children;return a.createElement("button",{onClick:this.addThisDevice},e)},t}(a.Component),W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=T.a.div({display:"flex",flexDirection:"column",alignItems:"center",flex:1}),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.showAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!0})},n.hideAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!1})},n.completionHandler=function(){n.hideAddHankoAuthenticator(),n.setState({devices:void 0}),n.fetchDevicesAndEdit()},n.fetchDevicesAndEdit=function(){var e=n.props.keycloak;n.setState({devices:void 0}),s(e,"/hanko/devices").then((function(e){var t=e.map((function(e){return L(e)}));if(n.setState({devices:t}),t.length>=0){var r=t.map((function(e){return e.createdAt})).sort().reverse()[0],a=t.map((function(e){return e.createdAt})).indexOf(r);n.setState({editIndex:a})}}))},n.fetchDevices=function(){var e=n.props.keycloak;n.setState({devices:void 0}),s(e,"/hanko/devices").then((function(e){var t=e.map((function(e){return L(e)}));n.setState({devices:t,editIndex:void 0})}))},n.b64DecodeUnicode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},n.parseJwt=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(n.b64DecodeUnicode(t))},n.updateEditIndex=function(e,t){n.setState({editIndex:e}),t&&n.fetchDevices()},n.state={showAddHankoAuthenticator:!1,showAddPlatformAuthenticator:!1,devices:void 0,editIndex:void 0},n}return W(t,e),t.prototype.componentDidMount=function(){var e=this;this.fetchDevices(),window.PublicKeyCredential&&window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then((function(t){e.setState({showAddPlatformAuthenticator:t})}))},t.prototype.render=function(){var e=this,t=this.props.keycloak,r=t.token,o=r?this.parseJwt(r):{},i=o.name?o.name:"",s=o.email?o.email:"",c=this.state,l=c.showAddHankoAuthenticator,u=c.showAddPlatformAuthenticator,p=c.devices,f=c.editIndex,m=new URLSearchParams(window.location.search),h=m.get("redirectUrl"),g=m.get("redirectName"),v=g||"return",y=n.p+"../img/logo.png";return a.createElement(F,null,a.createElement("div",{className:"navigation-bar"},a.createElement("div",{className:"flex row"},a.createElement("a",{className:"navigation-bar-header-link",href:h||""},a.createElement("img",{className:"navbar-logo",src:y})),a.createElement(d.a,{id:"App.manageAccountHeader",defaultMessage:"Manage Account"},(function(e){return a.createElement("span",{className:"navbar-header"},e)}))),h?a.createElement("a",{className:"navigation-bar-link",href:h},"◄ ",v):null),a.createElement("div",{id:"content"},a.createElement("div",{className:"center column"},a.createElement("div",{className:"container"},a.createElement(d.a,{id:"App.myAccountHeader",defaultMessage:"My Account"},(function(e){return a.createElement("h1",null,e)})),a.createElement("div",{className:"formfield"},a.createElement(d.a,{id:"App.nameLabel",defaultMessage:"Name"},(function(e){return a.createElement("label",null,e)})),a.createElement("span",null,i)),a.createElement("div",{className:"formfield"},a.createElement(d.a,{id:"App.emailLabel",defaultMessage:"E-Mail"},(function(e){return a.createElement("label",null,e)})),a.createElement("span",null,s))),a.createElement("div",{className:"container"},a.createElement(d.a,{id:"App.registeredDevicesHeader",defaultMessage:"Registered Devices"},(function(e){return a.createElement("h1",null,e)})),void 0===p?a.createElement(d.a,{id:"App.leadingMessage",defaultMessage:"Loading..."},(function(e){return a.createElement("div",null,e)})):a.createElement(I,{keycloak:t,devices:p,deviceDeletedHandler:this.fetchDevices,editIndexChangedHandler:this.updateEditIndex,editingIndex:f}),a.createElement("div",{className:"margin-bottom"}),l?a.createElement(B,{keycloak:t,cancelHandler:this.hideAddHankoAuthenticator,completionHandler:this.completionHandler}):a.createElement("div",{className:"button-list pull-right"},a.createElement(d.a,{id:"App.addHankoAuthenticatorButton",defaultMessage:"Add Hanko Authenticator"},(function(t){return a.createElement("button",{onClick:e.showAddHankoAuthenticator},t)})),a.createElement(d.a,{id:"App.addSecurityKeyButton",defaultMessage:"Add Security Key"},(function(n){return a.createElement(J,{refetch:e.fetchDevicesAndEdit,keycloak:t,type:"roaming"},n)})),u?a.createElement(d.a,{id:"App.addPlatformAuthenticatorButton",defaultMessage:"Add Platform Authenticator"},(function(n){return a.createElement(J,{refetch:e.fetchDevicesAndEdit,keycloak:t,type:"platform"},n)})):null)),a.createElement(R,{keycloak:t}))))},t}(a.Component),G=n(275),Q=function(e){var t=e.keycloak,n=function(){t.login()};return a.createElement("div",null,a.createElement(d.a,{id:"NotLoggedIn.loginFailedHeader",defaultMessage:"Login failed"},(function(e){return a.createElement("h1",null,e)})),a.createElement(d.a,{id:"NotLoggedIn.tryAgainButton",defaultMessage:"Try again"},(function(e){return a.createElement("button",{onClick:n},e)})))},Z=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r};n(464);var $=G({url:void 0!==window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth",realm:void 0!==window.realmId?window.realmId:"master",clientId:"hanko-account"}),X=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage,ee=X.toLowerCase().split(/[_-]+/)[0],te=n(517),ne=n(518),re=n(519);Object(d.c)(Z(ne,re));var ae=te[ee]||te[X]||te.en;c.locale(ee),$.init({onLoad:"login-required"}).success((function(e){i.render(a.createElement(d.b,{locale:X,messages:ae},a.createElement(Y,{keycloak:$})),document.getElementById("root"))})).error((function(){i.render(a.createElement(d.b,{locale:X,messages:ae},a.createElement(Q,{keycloak:$})),document.getElementById("root"))}))}});